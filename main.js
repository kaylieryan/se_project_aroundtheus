!function(){"use strict";class e{constructor(e,t,n){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_toggleLikeButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_deleteCard(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._toggleLikeButton()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._deleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=document.querySelector(t)}_showInputError(e){this._errorElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._errorClass)}_hideInputError(e){this._errorElement=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}toggleButtonState(){if(this._hasInvalidInput(this._inputList))return this._buttonElement.classList.add(this._inactiveButtonClass),void(this._buttonElement.disabled=!0);this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._isValid(e),this.toggleButtonState()}))})),this.toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this._popupElement.removeEventListener("click",this._closeViaClick),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_closeViaClick=e=>{(e.target.classList.contains("modal__close")||e.target.classList.contains("modal"))&&this.close()};setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._closeViaClick)}}class s extends n{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input")}close(){this._popupElement.removeEventListener("submit",this._submitForm),this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{""!==t.value&&(e[t.name]=t.value)})),e}_submitForm=()=>{const e=this._getInputValues();this._handleFormSubmit(e)};setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",this._submitForm)}}const i="#profile-edit-modal",r="#add-card-modal",o=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__title"),c=document.querySelector(".profile__description"),m=document.querySelector("#modal-form-description"),u=document.querySelector("#modal-form-title"),_=document.querySelector(".cards__list"),d={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__error-message",errorClass:"modal__error_visible"},p=new t(d,i),h=new t(d,r);p.enableValidation(),h.enableValidation();const E=new class{constructor(e,t){this._nameElement=e,this._jobElement=t}getUserInfo(){const e={};return e.profileName=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}(a,c),v=new s(i,(e=>{E.setUserInfo(e.name,e.description),v.close()}));o.addEventListener("click",(function(){const{profileName:e,description:t}=E.getUserInfo();u.value=e,m.value=t,p.toggleButtonState(),v.open()}));const g=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._containerElement=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerElement.append(e)}prependItem(e){this._containerElement.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{let{name:t,link:n}=e;const s=k({name:t,link:n});g.addItem(s)}},_);g.renderItems();const S=new s(r,(function(e){let{title:t,url:n}=e;const s=k({name:t,link:n});g.prependItem(s),S.close()})),L=new class extends n{constructor(e){super({popupSelector:e}),this._previewImageElement=document.querySelector(".modal__preview-image"),this._previewImageCaption=document.querySelector(".modal__preview-title")}open(e){let{name:t,link:n}=e;this._previewImageElement.alt=t,this._previewImageCaption.textContent=t,this._previewImageElement.src=n,super.open()}}("#image-modal");function k(t){let{name:n,link:s}=t;const i=new e({name:n,link:s},"#card-template",(e=>{let{name:t,link:n}=e;L.open({name:t,link:n})}));return i.getView()}l.addEventListener("click",(()=>{h.toggleButtonState(),S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQW9CLElBQW5CLEtBQUUxSSxFQUFJLEtBQUVFLEdBQU13SSxFQUNiTCxFQUFrQm5FLEtBQUssQ0FBRWxFLE9BQU1FLFFBQU8sSUFHMUMsT0FBT3VJLEVBQVl2SCxTQUNyQixDQWhCQXdFLEVBQWlCekUsaUJBQWlCLFNBQVMsS0FDekNrRixFQUFxQjlDLG9CQUNyQjRFLEVBQWEvRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8vaGFuZGxlTGlrZUJ1dHRvblxuICBfdG9nZ2xlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgLy9oYW5kbGVEZWxldGVCdXR0b25cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3RvZ2dsZUxpa2VCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fZGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7IC8vIGRlc3RydWN0dXJpbmcgdGhlIG9iamVjdFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIC8vIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbGVtZW50KTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xvc2VWaWFDbGljayk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9jbG9zZVZpYUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpIHx8XG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlVmlhQ2xpY2spO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRGb3JtKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0c09iamVjdCA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaWYgKGlucHV0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgIGlucHV0c09iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dHNPYmplY3Q7XG4gIH1cblxuICBfc3VibWl0Rm9ybSA9ICgpID0+IHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRGb3JtKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuLy9Vc2VkIGluIGluZGV4LmpzXG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsU2VsZWN0b3IgPSBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIjtcbmV4cG9ydCBjb25zdCBjYXJkTW9kYWxTZWxlY3RvciA9IFwiI2FkZC1jYXJkLW1vZGFsXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGlucHV0U2VsZWN0b3IgPSBcIi5tb2RhbF9faW5wdXRcIjtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWZvcm0tZGVzY3JpcHRpb25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtLXRpdGxlXCIpO1xuXG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBcIiNpbWFnZS1tb2RhbFwiO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvci1tZXNzYWdlXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgY29uZmlnLFxuICBwcm9maWxlVGl0bGVTZWxlY3RvcixcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsXG4gIHByb2ZpbGVFZGl0TW9kYWxTZWxlY3RvcixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQsXG4gIHByb2ZpbGVUaXRsZUVsZW1lbnQsXG4gIGNhcmRNb2RhbFNlbGVjdG9yLFxuICBhZGROZXdDYXJkQnV0dG9uLFxuICBjYXJkTGlzdCxcbiAgcHJldmlld0ltYWdlTW9kYWwsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy9Gb3JtIFZhbGlkYXRvclxuXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdE1vZGFsU2VsZWN0b3Jcbik7XG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY2FyZE1vZGFsU2VsZWN0b3IpO1xuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy9Qcm9maWxlIENsYXNzXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVUaXRsZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcik7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgcHJvZmlsZUVkaXRNb2RhbFNlbGVjdG9yLFxuICAoaW5wdXRzT2JqZWN0KSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRzT2JqZWN0Lm5hbWUsIGlucHV0c09iamVjdC5kZXNjcmlwdGlvbik7XG4gICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICB9XG4pO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblByb2ZpbGVQb3B1cCk7XG5cbmZ1bmN0aW9uIG9wZW5Qcm9maWxlUG9wdXAoKSB7XG4gIGNvbnN0IHsgcHJvZmlsZU5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVFbGVtZW50LnZhbHVlID0gcHJvZmlsZU5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudmFsdWUgPSBkZXNjcmlwdGlvbjtcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufVxuXG4vL1NlY3Rpb24gQ2xhc3NcblxuY29uc3QgY2FyZExpc3RTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoeyBuYW1lLCBsaW5rIH0pID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KTtcbiAgICAgIGNhcmRMaXN0U2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRMaXN0XG4pO1xuXG5jYXJkTGlzdFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy9Qb3B1cFdpdGhGb3JtIENsYXNzXG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGNhcmRNb2RhbFNlbGVjdG9yLCBzdWJtaXRDYXJkKTtcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHByZXZpZXdJbWFnZU1vZGFsKTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBuZXdDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbi8vQ2FyZCBGdW5jdGlvbnNcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxuICAgIHsgbmFtZSwgbGluayB9LFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAoeyBuYW1lLCBsaW5rIH0pID0+IHtcbiAgICAgIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gc3VibWl0Q2FyZCh7IHRpdGxlLCB1cmwgfSkge1xuICBjb25zdCBuZXdDYXJkRGF0YSA9IHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9O1xuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChuZXdDYXJkRGF0YSk7XG4gIGNhcmRMaXN0U2VjdGlvbi5wcmVwZW5kSXRlbShuZXdDYXJkKTtcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVFbGVtZW50LCBqb2JFbGVtZW50KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBuYW1lRWxlbWVudDtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gam9iRWxlbWVudDtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJPYmplY3QgPSB7fTtcbiAgICB1c2VyT2JqZWN0W1wicHJvZmlsZU5hbWVcIl0gPSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICB1c2VyT2JqZWN0W1wiZGVzY3JpcHRpb25cIl0gPSB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50O1xuICAgIHJldHVybiB1c2VyT2JqZWN0O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZUluZm8sIGpvYkluZm8pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWVJbmZvO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JJbmZvO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyRWxlbWVudCkge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gY29udGFpbmVyRWxlbWVudDtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShkb21FbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5hcHBlbmQoZG9tRWxlbWVudCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShkb21FbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGRvbUVsZW1lbnQpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQuc3JjID0gbGluaztcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90b2dnbGVMaWtlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2RlbGV0ZUNhcmQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0VmlldyIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaXNWYWxpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsImV2ZXJ5IiwicmVzZXRWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldnQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jbG9zZVZpYUNsaWNrIiwiX2hhbmRsZUVzY0Nsb3NlIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX3N1Ym1pdEZvcm0iLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0c09iamVjdCIsImlucHV0IiwidmFsdWUiLCJpbnB1dFZhbHVlcyIsInByb2ZpbGVFZGl0TW9kYWxTZWxlY3RvciIsImNhcmRNb2RhbFNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZVRpdGxlU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJwcm9maWxlVGl0bGVFbGVtZW50IiwiY2FyZExpc3QiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwibmFtZUVsZW1lbnQiLCJqb2JFbGVtZW50IiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInVzZXJPYmplY3QiLCJzZXRVc2VySW5mbyIsIm5hbWVJbmZvIiwiam9iSW5mbyIsImVkaXRQcm9maWxlUG9wdXAiLCJkZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lIiwiY2FyZExpc3RTZWN0aW9uIiwiY29udGFpbmVyRWxlbWVudCIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyRWxlbWVudCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJkb21FbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmQiLCJuZXdDYXJkUG9wdXAiLCJfcmVmNCIsInRpdGxlIiwidXJsIiwicHJldmlld0ltYWdlUG9wdXAiLCJfcHJldmlld0ltYWdlRWxlbWVudCIsIl9wcmV2aWV3SW1hZ2VDYXB0aW9uIiwiX3JlZjIiLCJjYXJkRWxlbWVudCIsIl9yZWYzIl0sInNvdXJjZVJvb3QiOiIifQ==